name: CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  lint:
    name: Code Quality (SwiftLint)
    runs-on: macos-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Install SwiftLint
        run: |
          # Check if SwiftLint is already installed
          if ! command -v swiftlint &> /dev/null; then
            echo "SwiftLint not found, installing via Homebrew..."
            brew install swiftlint
          else
            echo "SwiftLint is already installed"
            swiftlint version
          fi
      
      - name: Run SwiftLint
        run: |
          echo "Running SwiftLint with strict mode..."
          # Use --strict to fail on warnings, --reporter xcode for detailed output
          swiftlint lint --strict --reporter xcode
        continue-on-error: false
      
      - name: SwiftLint Summary
        if: always()
        run: |
          echo "SwiftLint execution completed"
          if [ $? -eq 0 ]; then
            echo "✅ No SwiftLint violations found"
          else
            echo "❌ SwiftLint violations detected - check output above for details"
          fi

  # Placeholder jobs - will be implemented in subsequent tasks
  setup:
    runs-on: macos-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Workflow setup complete
        run: echo "Basic GitHub Actions workflow structure is ready"